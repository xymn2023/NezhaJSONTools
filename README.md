# NezhaJsonTools

一个为 Nezha 监控系统设计的现代化 JSON 配置生成工具，提供直观的用户界面来生成和编辑 Nezha 的公开备注 JSON 配置。  
[立刻体验](https://nzjson-bh3.pages.dev/)

---

## ✨ 项目特色

### 🎨 现代化设计
- **玻璃态效果**: 采用现代化的毛玻璃设计，界面通透美观
- **渐变背景**: 动态渐变背景，营造科技感氛围
- **流畅动画**: 丰富的CSS动画和过渡效果，提升用户体验
- **响应式布局**: 完美适配桌面、平板、手机等各种设备
- **深色/浅色主题**: 支持自动主题检测和手动切换，保护用户眼睛

### 🤖 智能AI助手
- **小哪吒AI助手**: 基于Qwen3-14B模型的智能配置生成
- **实时对话**: 支持流式对话，实时显示AI思考过程
- **智能问答**: 当用户需求不明确时，主动询问具体信息
- **代码高亮**: AI生成的JSON代码自动语法高亮
- **一键复制**: 生成的配置代码可一键复制到剪贴板
- **上下文记忆**: 保持对话上下文，支持连续对话

### 🌍 国际化支持
- **中英文双语**: 完整的中英文界面切换
- **智能语言检测**: 自动检测浏览器语言偏好
- **本地化存储**: 用户语言偏好自动保存
- **货币格式**: 支持多种货币显示格式（CNY、USD、EUR、GBP）

---

## 🚀 核心功能

### 📋 账单配置 (billingDataMod)
- **智能日期计算**: 支持手动设置或自动计算计费周期
- **灵活计费周期**: 
  - 官方周期: 季、半年、年
  - 非官方周期: 天、周、2年、3年、4年、5年、永久
- **多种计费模式**:
  - 计费模式: 自定义金额和货币
  - 免费模式: 自动设置为0
  - 按量收费: 自动设置为-1
- **自动续费控制**: 可开启/关闭自动续费功能
- **货币支持**: CNY、USD、EUR、GBP多种货币
- **格式验证**: 自动验证和格式化输入数据

### 🌐 套餐配置 (planDataMod)
- **带宽设置**: 支持Mbps、Gbps、无限制等多种规格
- **流量配额**: 支持B/KB/MB/GB/TB/PB + 天/月/季/年
- **流量类型**: 入站/双向流量选择
- **IP地址管理**: IPv4/IPv6地址数量配置
- **网络路由**: AS号码配置
- **动态标签系统**: 支持添加/删除自定义标签

### 📊 流量监控规则 (trafficRules)
- **多种监控类型**: 
  - transfer_in_cycle (入站流量)
  - transfer_out_cycle (出站流量)
  - transfer_all_cycle (总流量)
- **灵活时间周期**: 支持小时/天/周/月/年
- **单位感知**: 支持B/KB/MB/GB/TB单位自动转换
- **阈值设置**: 最小/最大流量阈值配置
- **服务器过滤**: 支持忽略特定服务器ID
- **覆盖模式**: 可选择覆盖或追加规则

### ⚠️ 警报规则 (alertRules)
- **全面监控指标**:
  - 系统资源: CPU、GPU、内存、交换分区、磁盘
  - 网络状态: 网速、流量、离线状态
  - 系统负载: load1、load5、load15
  - 连接数: TCP/UDP连接数
  - 温度监控: 最高温度
- **智能阈值**: 支持最小/最大值设置
- **持续时间**: 可配置触发持续时间
- **服务器过滤**: 支持忽略特定服务器
- **覆盖控制**: 可选择监控所有或忽略所有服务器

---

## 🛠️ 高级功能

### 💻 代码编辑
- **实时预览**: 配置更改即时反映到JSON代码
- **双向同步**: 支持表单编辑和代码编辑双向同步
- **语法验证**: 自动验证JSON格式正确性
- **格式化**: 自动格式化JSON代码
- **一键刷新**: 从代码同步到表单配置

### 📱 用户体验
- **拖拽窗口**: AI聊天窗口支持拖拽移动
- **键盘快捷键**: 支持Enter发送消息，Shift+Enter换行
- **自动滚动**: 聊天内容自动滚动到底部
- **响应式设计**: 移动端优化布局
- **加载动画**: 丰富的加载和状态指示器

### 🔧 开发工具
- **主题检测**: 自动检测浏览器深浅色主题
- **本地存储**: 用户偏好自动保存
- **错误处理**: 完善的错误提示和处理机制
- **性能优化**: 流畅的动画和交互体验

---

## 📖 使用方法

### 🚀 快速开始
1. 打开 [NezhaJsonTools](https://nezhajsontools.pages.dev)
2. 在左侧设置面板配置您的账单和套餐信息
3. 右侧会实时显示生成的JSON配置
4. 点击"复制"按钮复制配置到剪贴板

### 🤖 AI助手使用
1. 点击"使用AI生成JSON"按钮开启AI模式
2. 在聊天框中描述您的需求
3. 小哪吒AI助手会询问具体信息并生成配置
4. 生成的配置会自动同步到表单中

### 📊 流量监控配置
1. 切换到"流量监控"页面
2. 选择监控类型和周期
3. 设置流量阈值和单位
4. 配置忽略的服务器ID
5. 复制生成的JSON配置

### ⚠️ 警报规则配置
1. 切换到"警报规则"页面
2. 选择监控指标类型
3. 设置阈值和持续时间
4. 配置服务器过滤规则
5. 复制生成的JSON配置

---

## 🏗️ 技术架构

### 前端技术栈
- **纯前端实现**: 无需服务器，可直接在浏览器中运行
- **现代CSS**: 使用CSS Grid、Flexbox和CSS变量
- **响应式设计**: 适配各种屏幕尺寸
- **无依赖**: 除了Font Awesome图标外，无外部依赖
- **本地存储**: 主题和语言偏好保存在本地

### AI集成
- **API集成**: 集成Qwen3-14B模型API
- **流式响应**: 支持实时流式对话
- **错误处理**: 完善的API错误处理机制
- **上下文管理**: 智能对话上下文管理

### 浏览器兼容性
- Chrome 60+
- Firefox 55+
- Safari 11+
- Edge 79+

---

## 📁 文件结构

```
NezhaJsonTools/
├── index.html          # 主页面 - 备注显示配置
├── traffic.html        # 流量监控页面
├── alert.html          # 警报规则页面
├── styles.css          # 样式文件
├── script.js           # 主功能脚本
├── traffic.js          # 流量监控脚本
├── alert.js            # 警报规则脚本
├── effects.js          # 特效脚本
├── README.md           # 说明文档
└── test-theme.html     # 主题测试页面
```

---

## 🎯 配置示例

### 基础配置示例
```json
{
  "billingDataMod": {
    "startDate": "2024-12-08T12:58:17.636Z",
    "endDate": "2025-12-08T12:58:17.636Z",
    "autoRenewal": "1",
    "cycle": "Year",
    "amount": "200EUR"
  },
  "planDataMod": {
    "bandwidth": "30Mbps",
    "trafficVol": "1TB/Month",
    "trafficType": "2",
    "IPv4": "1",
    "IPv6": "1",
    "networkRoute": "4837",
    "extra": "Einstein"
  }
}
```

### 流量监控示例
```json
[
  {
    "type": "transfer_out_cycle",
    "max": 1099511627776,
    "cycle_start": "2022-01-01T00:00:00+08:00",
    "cycle_interval": 1,
    "cycle_unit": "month",
    "cover": 1,
    "ignore": {"3": true, "4": true}
  }
]
```

### 警报规则示例
```json
[
  {
    "type": "offline",
    "duration": 10
  },
  {
    "type": "cpu",
    "max": 90,
    "duration": 300
  }
]
```

---

## 🌟 项目亮点

### 🎨 视觉设计
- **现代化UI**: 采用最新的设计趋势
- **流畅动画**: 60fps流畅动画效果
- **视觉反馈**: 丰富的交互反馈
- **无障碍设计**: 支持键盘导航和屏幕阅读器

### 🧠 智能功能
- **AI驱动**: 智能配置生成和优化
- **自动检测**: 自动主题和语言检测
- **智能验证**: 实时数据验证和格式化
- **上下文感知**: 智能对话上下文管理

### 🔒 安全可靠
- **本地处理**: 所有数据处理在本地完成
- **无数据收集**: 不收集用户隐私数据
- **开源透明**: 完全开源，代码透明
- **持续更新**: 定期功能更新和bug修复

---

## 🤝 贡献指南

欢迎提交Issue和Pull Request来改进项目！

### 开发环境
1. Fork项目到您的GitHub
2. Clone到本地开发环境
3. 修改代码并测试
4. 提交Pull Request

### 功能建议
- 在GitHub Issues中提出新功能建议
- 详细描述功能需求和实现方案
- 提供使用场景和示例

---

## 📄 许可证

本项目采用MIT许可证，详见LICENSE文件。

---

## 🙏 致谢

- **Nezha项目**: 提供优秀的服务器监控解决方案
- **Qwen团队**: 提供强大的AI模型支持
- **Font Awesome**: 提供精美的图标库
- **开源社区**: 所有贡献者和用户的支持

---

## 📞 联系方式

- **项目地址**: [GitHub](https://github.com/LAGSNESOwO/NezhaJSONTools)
- **在线体验**: [NezhaJsonTools](https://nezhajsontools.pages.dev)
- **作者网站**: [LAGSNES](https://lagsn.es)

---

**⭐ 如果这个项目对您有帮助，请给我们一个Star！**
